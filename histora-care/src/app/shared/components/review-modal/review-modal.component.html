<div class="review-sheet">
  <!-- Handle bar for bottom sheet feel -->
  <div class="sheet-handle"></div>

  <!-- Compact header with nurse name -->
  <div class="sheet-header">
    <h2 class="sheet-title">
      @if (nurseName) {
        Como fue tu servicio con {{ nurseName }}?
      } @else {
        Como fue tu servicio?
      }
    </h2>
  </div>

  <!-- Star Rating - Compact -->
  <div class="rating-row">
    @for (star of stars; track star) {
      <button
        class="star-btn"
        [class.active]="isStarFilled(star)"
        (click)="onStarClick(star)"
        [attr.aria-label]="star + ' estrella' + (star > 1 ? 's' : '')"
        type="button">
        <ion-icon [name]="getStarIcon(star)"></ion-icon>
      </button>
    }
  </div>

  @if (rating() > 0) {
    <p class="rating-text">{{ getRatingLabel() }}</p>
  }

  <!-- Comment - Compact textarea -->
  <div class="comment-row">
    <ion-textarea
      class="comment-input"
      [value]="comment()"
      (ionInput)="updateComment($event)"
      placeholder="Cuenta tu experiencia (opcional)"
      [rows]="2"
      [maxlength]="200"
      [disabled]="isSubmitting()">
    </ion-textarea>
    <span class="char-count">{{ comment().length }}/200</span>
  </div>

  <!-- Actions - Single row -->
  <div class="actions-row">
    <button class="skip-btn" (click)="skip()" [disabled]="isSubmitting()">
      Omitir por ahora
    </button>
    <ion-button
      class="submit-btn"
      [disabled]="!canSubmit()"
      (click)="submit()">
      @if (isSubmitting()) {
        <ion-spinner name="crescent"></ion-spinner>
      } @else {
        Enviar
      }
    </ion-button>
  </div>
</div>
