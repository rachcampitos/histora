@use '../../../theme/design-tokens' as tokens;

// Variables using design tokens
$primary-gradient: var(--histora-gradient);

.profile-content {
  --background: #{tokens.$surface-secondary};
}

// Loading State
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: tokens.$spacing-4;

  p {
    color: var(--text-secondary);
    font-size: tokens.$font-size-sm;
    margin: 0;
  }
}

// Profile Header
.profile-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: tokens.$spacing-8 tokens.$spacing-4 tokens.$spacing-6;
  background: $primary-gradient;
  color: white;

  .avatar-container {
    position: relative;
    margin-bottom: tokens.$spacing-4;
    display: flex;
    justify-content: center;
    cursor: pointer;

    &:active {
      transform: scale(0.95);
    }

    ion-avatar {
      width: 100px;
      height: 100px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      box-shadow: tokens.$shadow-lg;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
      }

      .default-avatar {
        font-size: 80px;
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
        padding: 0;
      }
    }

    .avatar-edit-badge {
      position: absolute;
      bottom: tokens.$spacing-1;
      right: calc(50% - 50px); // Offset from center
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid white;

      ion-icon {
        font-size: tokens.$font-size-sm;
        color: white;
      }
    }

    .verified-badge {
      position: absolute;
      top: 0;
      right: calc(50% - 50px); // Top-right corner of avatar
      background: tokens.$color-success;
      border-radius: 50%;
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid white;

      ion-icon {
        font-size: tokens.$font-size-base;
        color: white;
        display: block;
      }
    }

    .avatar-loading {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;

      ion-spinner {
        width: tokens.$spacing-8;
        height: tokens.$spacing-8;
      }
    }
  }

  .nurse-name {
    margin: 0;
    font-size: tokens.$font-size-2xl;
    font-weight: tokens.$font-weight-bold;
  }

  .nurse-role {
    margin: tokens.$spacing-1 0 0;
    font-size: tokens.$font-size-sm;
    opacity: 0.9;
  }
}

// Common Section Styles
.section {
  background: white;
  margin: tokens.$spacing-4;
  padding: tokens.$spacing-5;
  border-radius: tokens.$radius-lg;
  box-shadow: tokens.$shadow-sm;

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: tokens.$spacing-4;

    ion-icon {
      font-size: 22px;
      color: tokens.$color-brand-secondary;
    }

    h2 {
      margin: 0;
      font-size: tokens.$font-size-base;
      font-weight: tokens.$font-weight-semibold;
      color: var(--text-primary);
    }
  }
}

// CEP Section
.cep-section {
  .cep-display {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: tokens.$spacing-3 tokens.$spacing-4;
    background: tokens.$surface-secondary;
    border-radius: tokens.$radius-md;
    margin-bottom: tokens.$spacing-2;

    .cep-number {
      font-size: tokens.$font-size-xl;
      font-weight: tokens.$font-weight-bold;
      color: var(--text-primary);
      letter-spacing: 1px;
    }

    .cep-status {
      margin: 0;
    }
  }

  .cep-note {
    margin: 0;
    font-size: tokens.$font-size-xs;
    color: var(--text-secondary);
    text-align: center;
  }
}

// Bio Section
.bio-textarea {
  --background: #{tokens.$surface-secondary};
  --padding-start: #{tokens.$spacing-3};
  --padding-end: #{tokens.$spacing-3};
  --padding-top: #{tokens.$spacing-3};
  --padding-bottom: #{tokens.$spacing-3};
  border-radius: tokens.$radius-md;
  font-size: tokens.$font-size-sm;
  line-height: 1.5;
}

.char-count {
  margin: tokens.$spacing-2 0 0;
  font-size: tokens.$font-size-xs;
  color: var(--text-tertiary);
  text-align: right;
}

// Specialties Section
.specialties-chips {
  display: flex;
  flex-wrap: wrap;
  gap: tokens.$spacing-2;
  margin-bottom: tokens.$spacing-4;

  ion-chip {
    margin: 0;

    ion-icon {
      cursor: pointer;
      margin-left: tokens.$spacing-1;
    }
  }
}

.empty-text {
  color: var(--text-tertiary);
  font-size: tokens.$font-size-sm;
  text-align: center;
  padding: tokens.$spacing-4;
  margin: 0 0 tokens.$spacing-4;
  background: tokens.$surface-secondary;
  border-radius: tokens.$radius-md;
}

.add-specialty {
  display: flex;
  align-items: center;
  gap: tokens.$spacing-2;
  background: tokens.$surface-secondary;
  border-radius: tokens.$radius-md;
  padding: tokens.$spacing-1 tokens.$spacing-1 tokens.$spacing-1 tokens.$spacing-3;

  ion-input {
    --padding-start: 0;
    --padding-end: 0;
    font-size: tokens.$font-size-sm;
  }

  ion-button {
    margin: 0;
    --padding-start: #{tokens.$spacing-2};
    --padding-end: #{tokens.$spacing-2};
  }
}

.suggestions {
  margin-top: tokens.$spacing-4;

  .suggestions-label {
    margin: 0 0 tokens.$spacing-2;
    font-size: tokens.$font-size-xs;
    color: var(--text-secondary);
    font-weight: tokens.$font-weight-medium;
  }

  .suggestions-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;

    ion-chip {
      margin: 0;
      cursor: pointer;
      font-size: tokens.$font-size-xs;
      height: 28px;

      ion-icon {
        font-size: tokens.$font-size-sm;
        margin-right: tokens.$spacing-1;
      }
    }
  }
}

// Experience Section
.experience-input {
  display: flex;
  align-items: center;
  gap: tokens.$spacing-3;
  background: tokens.$surface-secondary;
  border-radius: tokens.$radius-md;
  padding: tokens.$spacing-2 tokens.$spacing-4;

  ion-input {
    --padding-start: 0;
    --padding-end: 0;
    font-size: tokens.$font-size-2xl;
    font-weight: tokens.$font-weight-bold;
    color: var(--text-primary);
    max-width: 80px;
    text-align: center;
  }

  .experience-label {
    font-size: tokens.$font-size-base;
    color: var(--text-secondary);
  }
}

// Service Radius Section
.radius-display {
  text-align: center;
  margin-bottom: tokens.$spacing-2;

  .radius-value {
    font-size: tokens.$spacing-8;
    font-weight: tokens.$font-weight-bold;
    color: tokens.$color-brand-secondary;
  }
}

ion-range {
  --bar-background: #{tokens.$color-neutral-200};
  --bar-background-active: #{$primary-gradient};
  --bar-height: 6px;
  --bar-border-radius: 3px;
  --knob-background: #{tokens.$color-brand-secondary};
  --knob-size: 24px;
  --knob-box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
  --pin-background: #{tokens.$color-brand-secondary};
  --pin-color: white;
  padding: 0 tokens.$spacing-2;
}

.helper-text {
  margin: tokens.$spacing-3 0 0;
  font-size: tokens.$font-size-xs;
  color: var(--text-tertiary);
  text-align: center;
  line-height: 1.4;
}

// Availability Section
.days-selector {
  margin-bottom: tokens.$spacing-6;

  .subsection-label {
    margin: 0 0 tokens.$spacing-3;
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: tokens.$font-weight-medium;
  }

  .days-grid {
    display: flex;
    justify-content: space-between;
    gap: 6px;

    .day-chip {
      flex: 1;
      text-align: center;
      padding: 10px tokens.$spacing-1;
      border-radius: tokens.$radius-md;
      font-size: tokens.$font-size-xs;
      font-weight: tokens.$font-weight-semibold;
      background: tokens.$surface-secondary;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all tokens.$duration-normal tokens.$easing-standard;

      &.selected {
        background: $primary-gradient;
        color: white;
      }

      &:active {
        transform: scale(0.95);
      }
    }
  }
}

.time-selector {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: tokens.$spacing-4;

  .time-field {
    flex: 1;

    .subsection-label {
      margin: 0 0 tokens.$spacing-2;
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: tokens.$font-weight-medium;
    }

    ion-datetime-button {
      width: 100%;

      &::part(native) {
        background: tokens.$surface-secondary;
        border-radius: tokens.$radius-md;
        padding: tokens.$spacing-3 tokens.$spacing-4;
        font-size: tokens.$font-size-base;
        font-weight: tokens.$font-weight-semibold;
        color: var(--text-primary);
        width: 100%;
        justify-content: center;
      }
    }
  }

  .time-separator {
    padding-bottom: tokens.$spacing-3;

    ion-icon {
      font-size: tokens.$font-size-xl;
      color: var(--text-tertiary);
    }
  }
}

// Save Section
.save-section {
  padding: 0 tokens.$spacing-4;
  margin-top: tokens.$spacing-6;

  .save-button {
    --background: #{$primary-gradient};
    --border-radius: #{tokens.$radius-lg};
    --box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    --color: white;
    --color-hover: white;
    --color-activated: white;
    font-weight: tokens.$font-weight-semibold;
    font-size: tokens.$font-size-base;
    height: 52px;

    ion-spinner {
      margin-right: tokens.$spacing-2;
    }
  }
}

// Subscription Section
.subscription-section {
  .subscription-item {
    --background: #{tokens.$surface-secondary};
    --padding-start: #{tokens.$spacing-4};
    --padding-end: #{tokens.$spacing-3};
    --inner-padding-end: #{tokens.$spacing-2};
    --border-radius: #{tokens.$radius-md};
    margin: 0;

    .subscription-info {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin-right: tokens.$spacing-3;

      .plan-name {
        font-size: 15px;
        font-weight: tokens.$font-weight-bold;
        color: var(--text-primary);
      }

      .plan-status {
        font-size: 12px;
        color: tokens.$color-success;
        font-weight: tokens.$font-weight-medium;
      }
    }

    ion-label {
      p {
        font-size: 13px;
        color: var(--text-secondary);
        margin: 0;
      }
    }
  }
}

// Settings Section
.settings-section {
  .settings-list {
    background: transparent;
    padding: 0;

    ion-item {
      --background: #{tokens.$surface-secondary};
      --padding-start: #{tokens.$spacing-3};
      --padding-end: #{tokens.$spacing-3};
      --inner-padding-end: #{tokens.$spacing-2};
      --border-radius: #{tokens.$radius-md};
      margin: 0;

      .setting-icon {
        font-size: 22px;
        color: tokens.$color-brand-secondary;
        margin-right: tokens.$spacing-3;
      }

      ion-label {
        h3 {
          font-size: 15px;
          font-weight: tokens.$font-weight-semibold;
          color: var(--text-primary);
          margin: 0 0 2px;
        }

        p {
          font-size: 13px;
          color: var(--text-secondary);
          margin: 0;
        }
      }
    }
  }
}

// Logout Section
.logout-section {
  padding: 0 tokens.$spacing-4;
  margin-top: tokens.$spacing-4;

  .logout-button {
    --border-radius: #{tokens.$radius-lg};
    --border-width: 2px;
    font-weight: tokens.$font-weight-semibold;
    height: tokens.$touch-target-comfortable;
  }
}

// App Version
.app-version {
  text-align: center;
  padding: tokens.$spacing-6 tokens.$spacing-4 tokens.$spacing-8;

  p {
    margin: 0;
    font-size: tokens.$font-size-xs;
    color: var(--text-tertiary);
  }
}

// Modal Styles
ion-modal {
  --border-radius: #{tokens.$radius-xl};
  --max-width: 300px;
  --max-height: auto;

  ion-datetime {
    --background: white;
  }
}

// ============================================================
// DARK MODE STYLES
// ============================================================
:host-context(body.dark),
:host-context(body.ion-palette-dark) {
  .profile-content {
    --background: #{tokens.$surface-dark-primary};
  }

  // Loading State
  .loading-container {
    p {
      color: tokens.$text-dark-tertiary;
    }
  }

  // Profile Header - NurseLite navy gradient for dark mode
  .profile-header {
    background: linear-gradient(135deg, #2d5f8a 0%, #1e3a5f 100%);
  }

  // Common Section Styles
  .section {
    background: tokens.$surface-dark-secondary;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

    .section-header {
      ion-icon {
        color: #6bb5b3;
      }

      h2 {
        color: tokens.$text-dark-primary;
      }
    }
  }

  // CEP Section
  .cep-section {
    .cep-display {
      background: tokens.$surface-dark-tertiary;

      .cep-number {
        color: tokens.$text-dark-primary;
      }
    }

    .cep-note {
      color: tokens.$text-dark-tertiary;
    }
  }

  // Bio Section
  .bio-textarea {
    --background: #{tokens.$surface-dark-tertiary};
    --color: #{tokens.$text-dark-primary};
    --placeholder-color: #{tokens.$color-neutral-500};
  }

  .char-count {
    color: tokens.$color-neutral-500;
  }

  // Specialties Section
  .empty-text {
    color: tokens.$text-dark-tertiary;
    background: tokens.$surface-dark-tertiary;
  }

  .add-specialty {
    background: tokens.$surface-dark-tertiary;

    ion-input {
      --color: #{tokens.$text-dark-primary};
      --placeholder-color: #{tokens.$color-neutral-500};
    }
  }

  .suggestions {
    .suggestions-label {
      color: tokens.$text-dark-tertiary;
    }
  }

  // Experience Section
  .experience-input {
    background: tokens.$surface-dark-tertiary;

    ion-input {
      --color: #{tokens.$text-dark-primary};
      color: tokens.$text-dark-primary;
    }

    .experience-label {
      color: tokens.$text-dark-tertiary;
    }
  }

  // Service Radius Section
  .radius-display {
    .radius-value {
      color: #6bb5b3;
    }
  }

  ion-range {
    --bar-background: #{tokens.$surface-dark-tertiary};
    --bar-background-active: linear-gradient(135deg, #4a9d9a 0%, #2d5f8a 100%);
    --knob-background: #6bb5b3;
    --knob-box-shadow: 0 2px 8px rgba(107, 181, 179, 0.4);
    --pin-background: #6bb5b3;
  }

  .helper-text {
    color: tokens.$color-neutral-500;
  }

  // Availability Section
  .days-selector {
    .subsection-label {
      color: tokens.$text-dark-tertiary;
    }

    .days-grid {
      .day-chip {
        background: tokens.$surface-dark-tertiary;
        color: tokens.$text-dark-tertiary;

        &.selected {
          background: linear-gradient(135deg, #2d5f8a 0%, #1e3a5f 100%);
          color: white;
        }
      }
    }
  }

  .time-selector {
    .time-field {
      .subsection-label {
        color: tokens.$text-dark-tertiary;
      }

      ion-datetime-button {
        &::part(native) {
          background: tokens.$surface-dark-tertiary;
          color: tokens.$text-dark-primary;
        }
      }
    }

    .time-separator {
      ion-icon {
        color: tokens.$color-neutral-500;
      }
    }
  }

  // Save Section
  .save-section {
    .save-button {
      --background: linear-gradient(135deg, #2d5f8a 0%, #1e3a5f 100%);
      --box-shadow: 0 4px 15px rgba(45, 95, 138, 0.4);
      --color: white;
      --color-hover: white;
      --color-activated: white;
    }
  }

  // Subscription Section
  .subscription-section {
    .subscription-item {
      --background: #{tokens.$surface-dark-tertiary};
      --color: #{tokens.$text-dark-primary};

      .subscription-info {
        .plan-name {
          color: tokens.$text-dark-primary;
        }

        .plan-status {
          color: #6bb5b3;
        }
      }

      ion-label {
        p {
          color: tokens.$text-dark-tertiary;
        }
      }
    }
  }

  // Settings Section
  .settings-section {
    .settings-list {
      ion-item {
        --background: #{tokens.$surface-dark-tertiary};
        --color: #{tokens.$text-dark-primary};

        .setting-icon {
          color: #6bb5b3;
        }

        ion-label {
          h3 {
            color: tokens.$text-dark-primary;
          }

          p {
            color: tokens.$text-dark-tertiary;
          }
        }
      }
    }
  }

  // App Version
  .app-version {
    p {
      color: tokens.$color-neutral-500;
    }
  }

  // Modal Styles
  ion-modal {
    ion-datetime {
      --background: #{tokens.$surface-dark-secondary};
      --background-rgb: 30, 41, 59;
      color: tokens.$text-dark-primary;
    }
  }
}
