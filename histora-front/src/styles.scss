/* Histora Global Styles */

/* Prevent horizontal scroll on mobile */
html, body {
  overflow-x: hidden !important;
  max-width: 100vw !important;
}

@media screen and (max-width: 768px) {
  html, body {
    overflow-x: hidden !important;
    width: 100% !important;
    max-width: 100% !important;
    position: relative !important;
  }

  /* Prevent any element from causing horizontal overflow */
  *, *::before, *::after {
    max-width: 100vw;
  }

  /* Main app container */
  app-root,
  app-main-layout,
  .main-container {
    overflow-x: hidden !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Sidebar - hide completely on mobile when closed */
  .sidebar {
    left: -280px !important;
    margin-left: 0 !important;
  }

  /* Show sidebar when overlay is open */
  .overlay-open .sidebar,
  body.overlay-open .sidebar {
    left: 0 !important;
  }

  /* Hide right sidebar completely */
  .right-sidebar {
    display: none !important;
  }

  /* Tables can cause overflow - make them scrollable within their container */
  .table-scroll,
  .responsive_table,
  .overflow-auto {
    overflow-x: auto !important;
    max-width: 100% !important;
    -webkit-overflow-scrolling: touch;
  }

  table.mat-mdc-table {
    min-width: 600px; /* Allow table to scroll, not the page */
  }

  /* Additional overflow prevention */
  .row {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  .col-lg-12,
  .col-md-12,
  .col-sm-12,
  .col-xs-12,
  [class*="col-"] {
    padding-left: 5px !important;
    padding-right: 5px !important;
  }

  /* Navbar fixes */
  .navbar {
    width: 100% !important;
    max-width: 100% !important;
    left: 0 !important;
    right: 0 !important;
  }

  /* Content area */
  .content-block {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* Ensure overlay menus appear above navbar (z-index: 999) */
.cdk-overlay-container {
  z-index: 1050 !important;
}

.cdk-overlay-backdrop {
  z-index: 1040 !important;
}

/* Ensure mat-menu items are clickable */
.cdk-overlay-pane {
  z-index: 1100 !important;
  pointer-events: auto !important;
}

.mat-mdc-menu-panel {
  pointer-events: auto !important;
}

.mat-mdc-menu-content {
  pointer-events: auto !important;
}

.mat-mdc-menu-item {
  pointer-events: auto !important;
}

/* Hide sidebar elements when not in main layout */
body:not(.theme-white):not(.theme-black):not(.theme-purple):not(.theme-orange):not(.theme-cyan):not(.theme-green):not(.theme-blue) {
  .sidebar,
  .overlay,
  .right-sidebar {
    display: none !important;
  }
}

/* Ensure overlay doesn't block auth pages */
.auth-container ~ .overlay,
.auth-container ~ .sidebar {
  display: none !important;
}

/* Prevent iOS Safari zoom on input focus */
@media screen and (max-width: 768px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="search"],
  input[type="url"],
  input[type="date"],
  textarea,
  select,
  .mat-mdc-input-element,
  .mat-mdc-select {
    font-size: 16px !important;
  }

  /* Ensure mat-form-field inputs also have 16px */
  .mat-mdc-form-field-input-control {
    font-size: 16px !important;
  }

  /* Mobile container adjustments */
  section.content {
    margin: 55px 8px 0 8px !important;
    width: calc(100% - 16px) !important;
    max-width: 100% !important;
    overflow-x: hidden !important;

    .content-block {
      padding: 10px 5px 0 5px !important;
    }
  }

  /* Card adjustments for mobile */
  .card {
    margin-bottom: 10px !important;
    border-radius: 8px !important;

    .card-header,
    .card-body {
      padding: 12px !important;
    }
  }

  /* Table header adjustments */
  .materialTableHeader {
    flex-direction: column !important;
    gap: 10px !important;
    padding: 10px !important;

    .left,
    .right {
      width: 100% !important;
      float: none !important;
    }

    .tbl-title h2 {
      font-size: 16px !important;
    }

    .tbl-search-box {
      width: 100% !important;

      .search-field {
        width: 100% !important;
      }
    }

    .tbl-export-btn {
      justify-content: flex-start !important;
      flex-wrap: wrap !important;
      gap: 5px !important;
    }
  }

  /* Breadcrumb adjustments */
  .block-header {
    padding: 0 !important;
    margin-bottom: 10px !important;

    .breadcrumb {
      padding: 8px 0 !important;
      font-size: 12px !important;
    }
  }

  /* Paginator adjustments */
  .mat-mdc-paginator {
    .mat-mdc-paginator-container {
      flex-wrap: wrap !important;
      justify-content: center !important;
      padding: 8px !important;
    }

    .mat-mdc-paginator-page-size {
      margin-right: 0 !important;
    }
  }
}
